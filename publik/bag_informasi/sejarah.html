<!DOCTYPE html>
<html lang="id">
<head>
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://senapelan.github.io/Home/kelurahanpadangterubuk.html">
    <meta property="og:title" content="Sejarah Kelurahan Padang Terubuk - Buku Kenangan">
    <meta property="og:description" content="Jelajahi perjalanan sejarah Kelurahan Padang Terubuk dalam lembaran buku kenangan">
    <meta property="og:site_name" content="Padang Terubuk">
    <meta property="og:image" content="https://senapelan.github.io/Home/data/foto/thumbnailpadangterubuk.png">
    <meta property="og:image:secure_url" content="https://senapelan.github.io/Home/data/foto/thumbnail.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="1200">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Sejarah Kelurahan Padang Terubuk - Buku Kenangan">
    <meta name="twitter:description" content="Jelajahi perjalanan sejarah Kelurahan Padang Terubuk dalam lembaran buku kenangan">
    <meta name="twitter:image" content="https://senapelan.github.io/Home/data/foto/thumbnailpadangterubuk.png">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Sejarah Kelurahan Padang Terubuk - Buku Kenangan</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&family=Libre+Baskerville:wght@400;700&family=Caveat:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="data/foto/favico/favico.png">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --cream: #faf3e0;
            --cream-dark: #e6d5b8;
            --old-paper: #f5e9d8;
            --ink: #2c3e50;
            --ink-soft: #5d6d7e;
            --leather: #8b5a2b;
            --leather-dark: #5d3a1a;
            --leather-light: #b48643;
            --binding: #4a3729;
            --ribbon: #a0522d;
            --gold: #bf8f3f;
            --shadow: rgba(0, 0, 0, 0.2);
        }

        body {
            background: #d9c8b2;
            background-image: radial-gradient(circle at 30% 40%, #e8d9c5 0%, #c9b59b 100%);
            min-height: 100vh;
            font-family: 'Libre Baskerville', serif;
            color: var(--ink);
            overflow-x: hidden;
            position: relative;
        }

        /* Wood Grain Background */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="wood"><feTurbulence type="fractalNoise" baseFrequency="0.4" numOctaves="2" stitchTiles="stitch"/><feColorMatrix type="matrix" values="1 0 0 0 0.3 0 1 0 0 0.2 0 0 1 0 0.1 0 0 0 1 0"/></filter><rect width="100" height="100" filter="url(%23wood)" opacity="0.15"/></svg>');
            pointer-events: none;
            z-index: 0;
        }

        /* Header */
        .header {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            height: 80px;
            background: rgba(74, 55, 41, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 100px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            z-index: 100;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 1px solid var(--leather-light);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
        }

        .logo-img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid var(--gold);
            background: white;
        }

        .logo-img img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .logo-text {
            font-family: 'Playfair Display', serif;
            color: var(--cream);
        }

        .logo-main {
            font-size: 20px;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .logo-sub {
            font-size: 12px;
            color: var(--cream-dark);
            font-style: italic;
        }

        /* Back Button */
        .back-button {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 25px;
            background: var(--leather-dark);
            border: 2px solid var(--gold);
            border-radius: 40px;
            color: var(--cream);
            text-decoration: none;
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .back-button:hover {
            background: var(--leather);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }

        /* Main Container */
        .main-container {
            position: relative;
            min-height: 100vh;
            padding: 140px 20px 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 10;
        }

        /* Book Container */
        .book-wrapper {
            width: 100%;
            max-width: 1300px;
            margin: 0 auto;
            position: relative;
        }

        /* Title Page */
        .title-page {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .title-page h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 900;
            color: #3e2c1a;
            text-shadow: 2px 2px 0 #b48643, 4px 4px 0 rgba(0,0,0,0.2);
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .title-page .subtitle {
            font-family: 'Caveat', cursive;
            font-size: 2rem;
            color: #5d3a1a;
            border-top: 2px dashed var(--gold);
            border-bottom: 2px dashed var(--gold);
            display: inline-block;
            padding: 10px 40px;
        }

        /* The Book - Realistic Style */
        .real-book {
            position: relative;
            width: 100%;
            background: transparent;
            perspective: 4000px;
            margin: 40px 0;
        }

        .book-spine {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 60px;
            background: linear-gradient(135deg, #5d3a1a, #3e2c1a, #5d3a1a);
            transform: translateX(-50%);
            border-radius: 10px 10px 30px 30px;
            box-shadow: 
                inset -3px -3px 10px rgba(0,0,0,0.5),
                inset 3px 3px 10px rgba(255,215,140,0.3),
                0 20px 40px rgba(0,0,0,0.5);
            z-index: 5;
            border-left: 2px solid #b48643;
            border-right: 2px solid #b48643;
        }

        .book-spine::before {
            content: "";
            position: absolute;
            top: 20px;
            left: 10px;
            right: 10px;
            bottom: 20px;
            border: 2px solid rgba(184, 134, 11, 0.3);
            border-radius: 20px;
        }

        .book-spine::after {
            content: "⚜️";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(90deg);
            color: var(--gold);
            font-size: 30px;
            opacity: 0.5;
        }

        .book-pages {
            position: relative;
            width: 100%;
            min-height: 650px;
            background: transparent;
            display: flex;
            gap: 40px;
            padding: 20px 40px 20px 80px;
        }

        /* Left Page */
        .page-left {
            flex: 1;
            background: linear-gradient(145deg, #fff8e7, #f5e9d8);
            border-radius: 20px 5px 5px 20px;
            padding: 50px 40px;
            box-shadow: 
                inset -5px 0 20px rgba(0,0,0,0.1),
                inset 5px 5px 30px rgba(255,255,255,0.8),
                15px 15px 30px rgba(0,0,0,0.3);
            position: relative;
            border: 1px solid #d4b48c;
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
        }

        .page-left::before {
            content: "";
            position: absolute;
            top: 20px;
            right: 10px;
            bottom: 20px;
            width: 20px;
            background: linear-gradient(90deg, transparent, rgba(0,0,0,0.05), transparent);
            border-radius: 50%;
            filter: blur(2px);
        }

        .page-left::after {
            content: "";
            position: absolute;
            top: 0;
            right: -20px;
            width: 40px;
            height: 100%;
            background: linear-gradient(90deg, rgba(180,150,120,0.3), transparent);
            filter: blur(5px);
            pointer-events: none;
        }

        /* Right Page */
        .page-right {
            flex: 1;
            background: linear-gradient(145deg, #f5e9d8, #fff8e7);
            border-radius: 5px 20px 20px 5px;
            padding: 50px 40px;
            box-shadow: 
                inset 5px 0 20px rgba(0,0,0,0.1),
                inset -5px 5px 30px rgba(255,255,255,0.8),
                -15px 15px 30px rgba(0,0,0,0.3);
            position: relative;
            border: 1px solid #d4b48c;
        }

        .page-right::before {
            content: "";
            position: absolute;
            top: 20px;
            left: 10px;
            bottom: 20px;
            width: 20px;
            background: linear-gradient(90deg, transparent, rgba(0,0,0,0.05), transparent);
            border-radius: 50%;
            filter: blur(2px);
        }

        .page-right::after {
            content: "";
            position: absolute;
            top: 0;
            left: -20px;
            width: 40px;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(180,150,120,0.3));
            filter: blur(5px);
            pointer-events: none;
        }

        /* Page Number */
        .page-number-left, .page-number-right {
            position: absolute;
            bottom: 30px;
            font-family: 'Caveat', cursive;
            color: #8b5a2b;
            font-size: 18px;
            opacity: 0.7;
        }

        .page-number-left {
            left: 40px;
        }

        .page-number-right {
            right: 40px;
        }

        /* Content Styling */
        .page-content {
            height: 100%;
            overflow-y: auto;
            padding-right: 10px;
            font-family: 'Libre Baskerville', serif;
            line-height: 1.8;
            color: #2c3e50;
            font-size: 16px;
        }

        .page-content::-webkit-scrollbar {
            width: 8px;
        }

        .page-content::-webkit-scrollbar-track {
            background: #d4b48c;
            border-radius: 10px;
        }

        .page-content::-webkit-scrollbar-thumb {
            background: #8b5a2b;
            border-radius: 10px;
            border: 2px solid #b48643;
        }

        /* Chapter Style */
        .chapter {
            margin-bottom: 40px;
        }

        .chapter:last-child {
            margin-bottom: 0;
        }

        .chapter-title {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            font-weight: 700;
            color: #3e2c1a;
            margin-bottom: 20px;
            border-bottom: 2px solid #bf8f3f;
            display: inline-block;
            padding-bottom: 5px;
        }

        .chapter-content p {
            margin-bottom: 20px;
            text-align: justify;
            text-indent: 40px;
        }

        .chapter-content p:first-of-type::first-letter {
            font-family: 'Playfair Display', serif;
            font-size: 60px;
            float: left;
            line-height: 0.8;
            margin-right: 15px;
            color: #a0522d;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        /* Book Cover (Closed State) */
        .book-cover-closed {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            background: linear-gradient(145deg, #8b5a2b, #5d3a1a);
            border-radius: 20px 10px 10px 20px;
            padding: 60px 40px;
            box-shadow: 
                0 30px 50px rgba(0,0,0,0.5),
                inset 0 0 30px rgba(0,0,0,0.3),
                inset 5px 5px 20px rgba(255,215,140,0.2);
            border: 3px solid #bf8f3f;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .book-cover-closed:hover {
            transform: translateY(-10px) rotate(1deg);
        }

        .cover-decoration {
            border: 3px solid #bf8f3f;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            background: rgba(0,0,0,0.2);
        }

        .cover-decoration h2 {
            font-family: 'Playfair Display', serif;
            font-size: 48px;
            color: #f5e9d8;
            text-shadow: 3px 3px 0 #3e2c1a, 5px 5px 10px black;
            margin-bottom: 20px;
        }

        .cover-decoration p {
            font-family: 'Caveat', cursive;
            font-size: 32px;
            color: #bf8f3f;
            border-top: 2px dashed #bf8f3f;
            border-bottom: 2px dashed #bf8f3f;
            padding: 15px 0;
            display: inline-block;
        }

        .book-tie {
            position: absolute;
            top: 50%;
            left: -15px;
            transform: translateY(-50%);
            width: 30px;
            height: 150px;
            background: linear-gradient(135deg, #a0522d, #5d3a1a);
            border-radius: 20px;
            box-shadow: inset -2px -2px 5px rgba(0,0,0,0.3);
            border: 2px solid #bf8f3f;
        }

        .book-tie::before, .book-tie::after {
            content: "";
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 20px;
            background: #bf8f3f;
            border-radius: 10px;
        }

        .book-tie::before {
            top: -10px;
        }

        .book-tie::after {
            bottom: -10px;
        }

        /* Control Buttons */
        .book-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }

        .book-btn {
            padding: 15px 40px;
            background: linear-gradient(145deg, #8b5a2b, #5d3a1a);
            border: 2px solid #bf8f3f;
            border-radius: 50px;
            color: #f5e9d8;
            font-family: 'Playfair Display', serif;
            font-size: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .book-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
            background: linear-gradient(145deg, #9b6a3b, #6d4a2a);
        }

        .book-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .book-btn i {
            font-size: 24px;
        }

        /* Loading */
        .loading-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(58, 44, 28, 0.95);
            backdrop-filter: blur(5px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease;
        }

        .loading-book {
            width: 200px;
            height: 200px;
            position: relative;
            transform-style: preserve-3d;
            animation: rotateBook 2s infinite linear;
        }

        .loading-page {
            position: absolute;
            width: 100px;
            height: 150px;
            background: #f5e9d8;
            border: 2px solid #bf8f3f;
            border-radius: 5px 10px 10px 5px;
            transform-origin: left center;
            animation: flipPage 1.5s infinite ease-in-out;
        }

        @keyframes flipPage {
            0%, 100% { transform: rotateY(0deg) translateX(0); }
            50% { transform: rotateY(-30deg) translateX(-20px); }
        }

        @keyframes rotateBook {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            color: #f5e9d8;
            margin-top: 40px;
            letter-spacing: 4px;
        }

        /* Bookmark Ribbon */
        .ribbon-left, .ribbon-right {
            position: absolute;
            top: 20px;
            width: 40px;
            height: 120px;
            background: linear-gradient(145deg, #a0522d, #7b3f1f);
            border: 2px solid #bf8f3f;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 20;
        }

        .ribbon-left {
            left: -15px;
            transform: rotate(-5deg);
        }

        .ribbon-right {
            right: -15px;
            transform: rotate(5deg);
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .book-pages {
                flex-direction: column;
                padding: 20px;
            }

            .page-left, .page-right {
                border-radius: 20px;
                margin-bottom: 30px;
            }

            .book-spine {
                display: none;
            }

            .ribbon-left, .ribbon-right {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 0 15px;
            }

            .logo-main {
                font-size: 16px;
            }

            .logo-sub {
                display: none;
            }

            .back-button span {
                display: none;
            }

            .back-button {
                padding: 12px 15px;
            }

            .page-left, .page-right {
                padding: 30px 20px;
            }

            .chapter-title {
                font-size: 22px;
            }

            .chapter-content p {
                font-size: 14px;
            }

            .book-btn {
                padding: 12px 25px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <a href="https://senapelan.github.io/Home/kelurahanpadangterubuk.html" class="logo">
            <div class="logo-img">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Logo_lambang_kota_pekanbaru.png/960px-Logo_lambang_kota_pekanbaru.png" alt="Logo">
            </div>
            <div class="logo-text">
                <div class="logo-main">Padang Terubuk</div>
                <div class="logo-sub">Buku Sejarah</div>
            </div>
        </a>
        
        <a href="https://senapelan.github.io/Home/kelurahanpadangterubuk.html" class="back-button">
            <i class="fas fa-arrow-left"></i>
            <span>Kembali</span>
        </a>
    </header>

    <!-- Main Content -->
    <div class="main-container">
        <div class="book-wrapper" id="bookWrapper">
            <!-- Title Page -->
            <div class="title-page">
                <h1 id="bookMainTitle">SEJARAH</h1>
                <div class="subtitle" id="bookSubtitle">Kelurahan Padang Terubuk</div>
            </div>

            <!-- Interactive Book -->
            <div class="real-book" id="realBook">
                <!-- Book Spine (visible on desktop) -->
                <div class="book-spine"></div>
                
                <!-- Bookmark Ribbons -->
                <div class="ribbon-left"></div>
                <div class="ribbon-right"></div>

                <!-- Book Pages Container -->
                <div class="book-pages" id="bookPagesContainer">
                    <!-- Left Page -->
                    <div class="page-left" id="leftPage">
                        <div class="page-number-left" id="leftPageNum"></div>
                        <div class="page-content" id="leftContent"></div>
                    </div>
                    
                    <!-- Right Page -->
                    <div class="page-right" id="rightPage">
                        <div class="page-number-right" id="rightPageNum"></div>
                        <div class="page-content" id="rightContent"></div>
                    </div>
                </div>
            </div>

            <!-- Book Cover (Closed State) -->
            <div class="book-cover-closed" id="bookCover" style="display: none;">
                <div class="book-tie"></div>
                <div class="cover-decoration">
                    <h2 id="coverTitle">SEJARAH PADANG TERUBUK</h2>
                    <p id="coverSub">Buku Kenangan</p>
                </div>
            </div>

            <!-- Controls -->
            <div class="book-controls">
                <button class="book-btn" id="prevBtn" disabled>
                    <i class="fas fa-chevron-left"></i>
                    Halaman Sebelumnya
                </button>
                <button class="book-btn" id="toggleBookBtn">
                    <i class="fas fa-book-open" id="toggleIcon"></i>
                    <span id="toggleBtnText">Buka Buku</span>
                </button>
                <button class="book-btn" id="nextBtn" disabled>
                    Halaman Selanjutnya
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-container" id="loadingOverlay">
        <div class="loading-book">
            <div class="loading-page"></div>
        </div>
        <div class="loading-text">Membaca manuskrip...</div>
    </div>

    <script>
        // Data from Google Sheets
        const SPREADSHEET_ID = '1NfodZgDQ8kyGGlWkJbcv57aJO2cY5a1KzPk23Gm4bFg';
        const SHEET_NAME = 'SEJARAH';
        
        let bookData = {
            title: 'SEJARAH KELURAHAN PADANG TERUBUK',
            pages: []
        };

        // State
        let currentPage = 0;
        let totalPages = 0;
        let isBookOpen = true;

        // DOM Elements
        const loadingOverlay = document.getElementById('loadingOverlay');
        const bookCover = document.getElementById('bookCover');
        const realBook = document.getElementById('realBook');
        const leftContent = document.getElementById('leftContent');
        const rightContent = document.getElementById('rightContent');
        const leftPageNum = document.getElementById('leftPageNum');
        const rightPageNum = document.getElementById('rightPageNum');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const toggleBookBtn = document.getElementById('toggleBookBtn');
        const toggleIcon = document.getElementById('toggleIcon');
        const toggleBtnText = document.getElementById('toggleBtnText');
        const bookMainTitle = document.getElementById('bookMainTitle');
        const bookSubtitle = document.getElementById('bookSubtitle');
        const coverTitle = document.getElementById('coverTitle');
        const coverSub = document.getElementById('coverSub');

        // Initialize
        async function fetchSejarahData() {
            try {
                loadingOverlay.style.display = 'flex';
                
                // Using CSV export method
                const csvUrl = `https://docs.google.com/spreadsheets/d/${SPREADSHEET_ID}/gviz/tq?tqx=out:csv&sheet=${SHEET_NAME}`;
                
                const response = await fetch(csvUrl);
                const csvText = await response.text();
                
                // Parse CSV properly
                const rows = [];
                const lines = csvText.split('\n');
                
                for (let line of lines) {
                    const row = [];
                    let inQuote = false;
                    let currentCell = '';
                    
                    for (let char of line) {
                        if (char === '"') {
                            inQuote = !inQuote;
                        } else if (char === ',' && !inQuote) {
                            row.push(currentCell.replace(/^"|"$/g, '').trim());
                            currentCell = '';
                        } else {
                            currentCell += char;
                        }
                    }
                    row.push(currentCell.replace(/^"|"$/g, '').trim());
                    rows.push(row);
                }

                if (rows.length >= 2) {
                    // Title from A2
                    bookData.title = rows[1][0] || 'SEJARAH KELURAHAN PADANG TERUBUK';
                    
                    // Get pages from B2 to Z2, filter out empty cells
                    const pages = rows[1].slice(1).filter(cell => cell && cell.trim() !== '');
                    
                    if (pages.length > 0) {
                        bookData.pages = pages;
                    } else {
                        // Fallback data
                        bookData.pages = getFallbackData();
                    }
                } else {
                    bookData.pages = getFallbackData();
                }
                
                // Update UI
                bookMainTitle.textContent = bookData.title;
                bookSubtitle.textContent = 'Manuskrip Kenangan';
                coverTitle.textContent = bookData.title;
                coverSub.textContent = 'Buku Sejarah';
                
                totalPages = bookData.pages.length;
                currentPage = 0;
                
                renderPages();
                
                setTimeout(() => {
                    loadingOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 500);
                }, 1000);
                
            } catch (error) {
                console.error('Error:', error);
                bookData.pages = getFallbackData();
                totalPages = bookData.pages.length;
                renderPages();
                
                setTimeout(() => {
                    loadingOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 500);
                }, 1000);
            }
        }

        function getFallbackData() {
            return [
                "Kelurahan Padang Terubuk berdiri pada tahun 1950-an, berawal dari sebuah perkampungan kecil di tepian Sungai Siak. Nama 'Padang Terubuk' diambil dari bahasa setempat yang berarti 'padang rumput yang luas', menggambarkan kondisi geografis wilayah yang dulunya merupakan hamparan savana dengan ilalang tinggi.",
                
                "Pada masa kolonial Belanda, wilayah ini merupakan daerah perkebunan dan tempat persinggahan para pedagang yang melewati Sungai Siak. Banyak pedagang dari Minangkabau, Melayu, dan Tionghoa yang singgah dan akhirnya menetap, membentuk masyarakat yang heterogen.",
                
                "Tahun 1960-an, Padang Terubuk mulai berkembang pesat seiring dengan dibukanya akses jalan darat yang menghubungkan wilayah ini dengan pusat Kota Pekanbaru. Pemukiman mulai tertata, fasilitas umum seperti sekolah dan pasar mulai dibangun.",
                
                "Memasuki tahun 1980-an, Padang Terubuk resmi menjadi kelurahan definitif di Kecamatan Senapelan. Pembangunan infrastruktur semakin gencar dilakukan, termasuk perbaikan jalan, drainase, dan penerangan umum.",
                
                "Era reformasi membawa perubahan signifikan dengan diterapkannya otonomi daerah. Kelurahan Padang Terubuk mulai mengembangkan berbagai program pemberdayaan masyarakat dan peningkatan kualitas pelayanan publik.",
                
                "Memasuki era digital, Padang Terubuk bertransformasi menjadi kelurahan modern dengan sistem pelayanan berbasis teknologi. Masyarakat dapat mengakses berbagai layanan administrasi secara online, mempermudah urusan kependudukan dan perizinan.",
                
                "Hingga kini, Kelurahan Padang Terubuk terus berbenah, mengedepankan prinsip transparansi, akuntabilitas, dan partisipasi masyarakat dalam setiap program pembangunan, dengan tetap memegang teguh nilai-nilai kearifan lokal."
            ];
        }

        function renderPages() {
            if (!bookData.pages.length) return;
            
            // Calculate which pages to show
            const leftIndex = currentPage;
            const rightIndex = currentPage + 1;
            
            // Render left page
            if (leftIndex < bookData.pages.length) {
                const leftText = bookData.pages[leftIndex];
                leftContent.innerHTML = formatPageContent(leftText, leftIndex + 1);
                leftPageNum.textContent = `${leftIndex + 1}`;
            } else {
                leftContent.innerHTML = '<div class="chapter"><p style="text-align: center;">Halaman kosong</p></div>';
                leftPageNum.textContent = '';
            }
            
            // Render right page
            if (rightIndex < bookData.pages.length) {
                const rightText = bookData.pages[rightIndex];
                rightContent.innerHTML = formatPageContent(rightText, rightIndex + 1);
                rightPageNum.textContent = `${rightIndex + 1}`;
            } else {
                rightContent.innerHTML = '<div class="chapter"><p style="text-align: center;">— Tamat —</p></div>';
                rightPageNum.textContent = '';
            }
            
            // Update buttons
            updateButtons();
        }

        function formatPageContent(text, chapterNum) {
            // Split text into paragraphs
            const paragraphs = text.split('\n').filter(p => p.trim() !== '');
            
            if (paragraphs.length === 0) {
                paragraphs.push(text); // Use whole text if no line breaks
            }
            
            return `
                <div class="chapter">
                    <h2 class="chapter-title">Bab ${chapterNum}</h2>
                    <div class="chapter-content">
                        ${paragraphs.map(p => `<p>${p}</p>`).join('')}
                    </div>
                </div>
            `;
        }

        function updateButtons() {
            prevBtn.disabled = currentPage <= 0;
            nextBtn.disabled = currentPage + 2 >= totalPages;
        }

        // Event Listeners
        prevBtn.addEventListener('click', () => {
            if (currentPage > 0) {
                currentPage -= 2;
                renderPages();
                
                // Add page flip sound effect (if you want)
                // playFlipSound();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentPage + 2 < totalPages) {
                currentPage += 2;
                renderPages();
            }
        });

        toggleBookBtn.addEventListener('click', () => {
            isBookOpen = !isBookOpen;
            
            if (isBookOpen) {
                bookCover.style.display = 'none';
                realBook.style.display = 'block';
                toggleIcon.className = 'fas fa-book-closed';
                toggleBtnText.textContent = 'Tutup Buku';
            } else {
                bookCover.style.display = 'block';
                realBook.style.display = 'none';
                toggleIcon.className = 'fas fa-book-open';
                toggleBtnText.textContent = 'Buka Buku';
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (!isBookOpen) return;
            
            if (e.key === 'ArrowLeft') {
                prevBtn.click();
            } else if (e.key === 'ArrowRight') {
                nextBtn.click();
            }
        });

        // Touch swipe for mobile
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });
        
        document.addEventListener('touchend', (e) => {
            if (!isBookOpen) return;
            
            touchEndX = e.changedTouches[0].screenX;
            const diff = touchEndX - touchStartX;
            
            if (Math.abs(diff) > 50) { // Minimum swipe distance
                if (diff > 0) {
                    // Swipe right - previous page
                    prevBtn.click();
                } else {
                    // Swipe left - next page
                    nextBtn.click();
                }
            }
        }, { passive: true });

        // Initialize
        fetchSejarahData();

        // Add some texture to pages
        function addPaperTexture() {
            const style = document.createElement('style');
            style.textContent = `
                .page-left, .page-right {
                    background-image: 
                        linear-gradient(45deg, rgba(200,180,140,0.1) 25%, transparent 25%),
                        linear-gradient(-45deg, rgba(200,180,140,0.1) 25%, transparent 25%);
                    background-size: 20px 20px;
                    background-position: 0 0, 0 10px;
                }
            `;
            document.head.appendChild(style);
        }
        
        addPaperTexture();
    </script>
</body>
</html>
