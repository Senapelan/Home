<!DOCTYPE html>
<html lang="id">
<head>
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://senapelan.github.io/Home/kelurahanpadangterubuk.html">
    <meta property="og:title" content="Sejarah Kelurahan Padang Terubuk - Arsip Digital">
    <meta property="og:description" content="Jelajahi sejarah Kelurahan Padang Terubuk dalam arsip digital modern">
    <meta property="og:site_name" content="Padang Terubuk">
    <meta property="og:image" content="https://senapelan.github.io/Home/data/foto/thumbnailpadangterubuk.png">
    <meta property="og:image:secure_url" content="https://senapelan.github.io/Home/data/foto/thumbnail.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="1200">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Sejarah Kelurahan Padang Terubuk - Arsip Digital">
    <meta name="twitter:description" content="Jelajahi sejarah Kelurahan Padang Terubuk dalam arsip digital modern">
    <meta name="twitter:image" content="https://senapelan.github.io/Home/data/foto/thumbnailpadangterubuk.png">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <title>Sejarah Kelurahan Padang Terubuk - Arsip Digital</title>
    
    <!-- GOOGLE FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- FAVICON -->
    <link rel="icon" type="image/png" sizes="32x32" href="data/foto/favico/favico.png">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #1e6bff;
            --primary-dark: #0a4fcc;
            --secondary: #00c9b7;
            --accent: #ff6b6b;
            --dark: #0c1f33;
            --light: #f6f7f9;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text: #2c3e50;
            --text-light: #5d6d7e;
            --shadow-lg: 0 25px 50px rgba(0, 0, 0, 0.15);
            --shadow-sm: 0 8px 30px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s ease;
            
            /* Old Paper Colors */
            --parchment: #f5e9d8;
            --parchment-dark: #e8d5b5;
            --parchment-light: #faf0e0;
            --ink-old: #3e2c1a;
            --sepia: #8b5a2b;
            --gold-old: #b48643;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            position: fixed;
            -webkit-overflow-scrolling: touch;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #66757f, #4a5a63);
            color: var(--text);
            position: relative;
        }

        /* Wood Texture Background */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="wood"><feTurbulence type="fractalNoise" baseFrequency="0.4" numOctaves="2" stitchTiles="stitch"/><feColorMatrix type="matrix" values="1 0 0 0 0.3 0 1 0 0 0.2 0 0 1 0 0.1 0 0 0 1 0"/></filter><rect width="100" height="100" filter="url(%23wood)" opacity="0.1"/></svg>');
            pointer-events: none;
            z-index: -1;
        }

        /* Glass Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            background: rgba(12, 31, 51, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            z-index: 1000;
            transition: var(--transition);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            text-decoration: none;
        }

        .logo-img {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            overflow: hidden;
            background: transparent;
        }

        .logo-img img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-main {
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            font-weight: 800;
            background: linear-gradient(135deg, #fff, #a3d4ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .logo-sub {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.8);
        }

        /* Back Button */
        .back-button {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 30px;
            color: white;
            text-decoration: none;
            transition: var(--transition);
            box-shadow: 0 5px 10px rgba(30, 107, 255, 0.3);
        }

        .back-button i {
            font-size: 18px;
        }

        .back-button span {
            display: none;
        }

        /* Main Container */
        .main-container {
            height: 100vh;
            height: -webkit-fill-available;
            width: 100%;
            padding: 80px 15px 20px;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 10;
            overflow: hidden;
        }

        /* Title Bar */
        .title-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 0 5px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .title-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .title-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            box-shadow: 0 8px 15px rgba(30, 107, 255, 0.3);
            flex-shrink: 0;
        }

        .title-text h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 20px;
            font-weight: 700;
            color: white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
            margin-bottom: 2px;
            line-height: 1.2;
        }

        .title-text p {
            color: rgba(255,255,255,0.9);
            font-size: 12px;
        }

        .page-indicator {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 30px;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            font-size: 14px;
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
            white-space: nowrap;
        }

        .page-indicator span {
            color: var(--secondary);
            font-weight: 700;
        }

        /* Content Grid */
        .content-grid {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-height: 0;
            margin-bottom: 15px;
            overflow: hidden;
        }

        /* Old Paper Card Style */
        .history-card {
            background: var(--parchment);
            background-image: 
                linear-gradient(145deg, rgba(255,255,240,0.8) 0%, rgba(230,210,170,0.9) 100%),
                repeating-linear-gradient(45deg, rgba(180,130,70,0.02) 0px, rgba(180,130,70,0.02) 2px, transparent 2px, transparent 6px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 
                0 10px 20px rgba(0,0,0,0.2),
                inset 0 0 0 1px rgba(255,255,200,0.7),
                inset 0 0 15px rgba(140,90,40,0.2);
            display: flex;
            flex-direction: column;
            height: 50%;
            min-height: 0;
            position: relative;
            border: 1px solid var(--gold-old);
            transition: var(--transition);
        }

        .history-card:first-child {
            margin-bottom: 0;
        }

        /* Paper Texture Overlay */
        .paper-texture {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="1" stitchTiles="stitch"/><feColorMatrix type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.15 0"/></filter><rect width="200" height="200" filter="url(%23noise)" opacity="0.3"/></svg>');
            opacity: 0.15;
            pointer-events: none;
            border-radius: inherit;
        }

        /* Ink Stains */
        .ink-stain {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(139, 69, 19, 0.2);
            position: relative;
            z-index: 2;
            flex-shrink: 0;
        }

        .page-badge {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #8b5a2b, #5d3a1a);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #f5e9d8;
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 18px;
            box-shadow: 0 4px 10px rgba(100,50,10,0.3);
            border: 2px solid #b48643;
            flex-shrink: 0;
        }

        .card-header h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 22px;
            font-weight: 700;
            color: #3e2c1a;
            flex: 1;
            letter-spacing: 0.5px;
            line-height: 1.2;
        }

        .card-content {
            flex: 1;
            overflow-y: auto;
            padding-right: 5px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 16px;
            line-height: 1.6;
            color: #2c1e0f;
            position: relative;
            z-index: 2;
            -webkit-overflow-scrolling: touch;
        }

        .card-content p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .card-content p:first-of-type::first-letter {
            font-family: 'Cormorant Garamond', serif;
            font-size: 48px;
            font-weight: 700;
            float: left;
            line-height: 0.8;
            margin-right: 8px;
            color: #8b5a2b;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        /* Custom Scrollbar */
        .card-content::-webkit-scrollbar {
            width: 4px;
        }

        .card-content::-webkit-scrollbar-track {
            background: #d9c2a7;
            border-radius: 4px;
        }

        .card-content::-webkit-scrollbar-thumb {
            background: #8b5a2b;
            border-radius: 4px;
        }

        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #8b5a2b;
            text-align: center;
            padding: 20px;
            font-family: 'Cormorant Garamond', serif;
        }

        .empty-state i {
            font-size: 50px;
            color: rgba(139, 69, 19, 0.2);
            margin-bottom: 10px;
        }

        .empty-state p {
            font-size: 16px;
            font-style: italic;
        }

        /* Navigation Controls */
        .nav-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 0 5px;
            flex-shrink: 0;
        }

        .nav-btn {
            width: 50px;
            height: 50px;
            border-radius: 25px;
            background: white;
            border: 2px solid rgba(30, 107, 255, 0.1);
            color: var(--primary);
            font-size: 20px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-sm);
            -webkit-tap-highlight-color: transparent;
        }

        .nav-btn:active:not(:disabled) {
            transform: scale(0.95);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        .page-info {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 14px;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 30px;
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .page-info i {
            margin-right: 6px;
            color: var(--secondary);
            font-size: 12px;
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 30, 15, 0.98);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            transition: opacity 0.3s ease;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #8b5a2b;
            border-top: 4px solid #b48643;
            border-right: 4px solid #f5e9d8;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
            box-shadow: 0 0 20px rgba(180, 134, 67, 0.3);
        }

        .loading-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 20px;
            font-weight: 600;
            color: #f5e9d8;
            letter-spacing: 1px;
            text-align: center;
            padding: 0 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Reading Progress - Hidden on Mobile */
        .reading-progress {
            display: none;
        }

        /* Landscape Mode */
        @media (orientation: landscape) and (max-height: 600px) {
            .main-container {
                padding: 70px 15px 10px;
            }
            
            .history-card {
                padding: 15px;
            }
            
            .card-header {
                margin-bottom: 10px;
                padding-bottom: 8px;
            }
            
            .card-header h2 {
                font-size: 20px;
            }
            
            .card-content {
                font-size: 14px;
            }
            
            .card-content p {
                margin-bottom: 10px;
            }
        }

        /* Small Phones */
        @media (max-width: 380px) {
            .title-section {
                gap: 8px;
            }
            
            .title-icon {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            
            .title-text h1 {
                font-size: 18px;
            }
            
            .title-text p {
                font-size: 11px;
            }
            
            .page-indicator {
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .card-header h2 {
                font-size: 20px;
            }
            
            .card-content {
                font-size: 15px;
            }
            
            .nav-btn {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
            
            .page-info {
                padding: 8px 15px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <a href="https://senapelan.github.io/Home/kelurahanpadangterubuk.html" class="logo">
            <div class="logo-img">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Logo_lambang_kota_pekanbaru.png/960px-Logo_lambang_kota_pekanbaru.png" alt="Logo">
            </div>
            <div class="logo-text">
                <div class="logo-main">Padang Terubuk</div>
                <div class="logo-sub">Arsip Digital</div>
            </div>
        </a>
        
        <a href="https://senapelan.github.io/Home/kelurahanpadangterubuk.html" class="back-button">
            <i class="fas fa-arrow-left"></i>
            <span>Kembali</span>
        </a>
    </header>

    <!-- Main Content -->
    <div class="main-container">
        <!-- Title Bar -->
        <div class="title-bar">
            <div class="title-section">
                <div class="title-icon">
                    <i class="fas fa-scroll"></i>
                </div>
                <div class="title-text">
                    <h1 id="bookTitle">SEJARAH</h1>
                    <p id="bookSubtitle">Padang Terubuk</p>
                </div>
            </div>
            <div class="page-indicator" id="pageIndicator">
                <span id="currentPageDisplay">1</span>/<span id="totalPagesDisplay">7</span>
            </div>
        </div>

        <!-- Content Grid -->
        <div class="content-grid" id="contentGrid">
            <!-- Top Card -->
            <div class="history-card" id="leftCard">
                <div class="paper-texture"></div>
                <div class="ink-stain" style="top: 10%; right: 10%; width: 100px; height: 100px; background: radial-gradient(circle, rgba(100,60,20,0.05) 0%, transparent 70%);"></div>
                <div class="ink-stain" style="bottom: 20%; left: 5%; width: 80px; height: 80px; background: radial-gradient(circle, rgba(100,60,20,0.03) 0%, transparent 70%);"></div>
                
                <div class="card-header">
                    <div class="page-badge" id="leftBadge">1</div>
                    <h2 id="leftTitle">Bab 1</h2>
                </div>
                <div class="card-content" id="leftContent">
                    <p>Memuat manuskrip...</p>
                </div>
            </div>

            <!-- Bottom Card -->
            <div class="history-card" id="rightCard">
                <div class="paper-texture"></div>
                <div class="ink-stain" style="top: 30%; left: 15%; width: 120px; height: 120px; background: radial-gradient(circle, rgba(100,60,20,0.04) 0%, transparent 70%);"></div>
                <div class="ink-stain" style="bottom: 10%; right: 20%; width: 90px; height: 90px; background: radial-gradient(circle, rgba(100,60,20,0.02) 0%, transparent 70%);"></div>
                
                <div class="card-header">
                    <div class="page-badge" id="rightBadge">2</div>
                    <h2 id="rightTitle">Bab 2</h2>
                </div>
                <div class="card-content" id="rightContent">
                    <p>Memuat manuskrip...</p>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-controls">
            <button class="nav-btn" id="prevBtn" disabled>
                <i class="fas fa-chevron-left"></i>
            </button>
            
            <div class="page-info">
                <i class="fas fa-feather-alt"></i>
                <span id="pageRange">1-2</span>
            </div>
            
            <button class="nav-btn" id="nextBtn">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <!-- Loading -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Membuka manuskrip kuno...</div>
    </div>

    <script>
        // Google Sheets
        const SPREADSHEET_ID = '1NfodZgDQ8kyGGlWkJbcv57aJO2cY5a1KzPk23Gm4bFg';
        const SHEET_NAME = 'SEJARAH';
        
        // State
        let bookData = {
            title: 'SEJARAH KELURAHAN PADANG TERUBUK',
            pages: []
        };
        
        let currentPage = 0;
        let totalPages = 0;
        
        // DOM Elements
        const loadingOverlay = document.getElementById('loadingOverlay');
        const bookTitle = document.getElementById('bookTitle');
        const bookSubtitle = document.getElementById('bookSubtitle');
        const leftContent = document.getElementById('leftContent');
        const rightContent = document.getElementById('rightContent');
        const leftBadge = document.getElementById('leftBadge');
        const rightBadge = document.getElementById('rightBadge');
        const leftTitle = document.getElementById('leftTitle');
        const rightTitle = document.getElementById('rightTitle');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const currentPageDisplay = document.getElementById('currentPageDisplay');
        const totalPagesDisplay = document.getElementById('totalPagesDisplay');
        const pageRange = document.getElementById('pageRange');

        // Fix for iOS viewport height
        function setVH() {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }

        window.addEventListener('resize', setVH);
        setVH();

        // Fetch Data
        async function fetchSejarahData() {
            try {
                loadingOverlay.style.display = 'flex';
                
                const csvUrl = `https://docs.google.com/spreadsheets/d/${SPREADSHEET_ID}/gviz/tq?tqx=out:csv&sheet=${SHEET_NAME}`;
                
                const response = await fetch(csvUrl);
                const csvText = await response.text();
                
                // Parse CSV
                const rows = csvText.split('\n').map(row => {
                    const matches = row.match(/(".*?"|[^,]+)(?=\s*,|\s*$)/g);
                    return matches ? matches.map(cell => cell.replace(/^"|"$/g, '').trim()) : [];
                });

                if (rows.length >= 2) {
                    bookData.title = rows[1][0] || 'SEJARAH KELURAHAN PADANG TERUBUK';
                    
                    const pages = rows[1].slice(1).filter(cell => cell && cell.trim() !== '');
                    
                    if (pages.length > 0) {
                        bookData.pages = pages;
                    } else {
                        bookData.pages = getFallbackData();
                    }
                } else {
                    bookData.pages = getFallbackData();
                }
                
                // Update UI
                bookTitle.textContent = bookData.title.split(' ').slice(0,2).join(' ');
                bookSubtitle.textContent = bookData.title.split(' ').slice(2).join(' ') || 'Padang Terubuk';
                
                totalPages = bookData.pages.length;
                totalPagesDisplay.textContent = totalPages;
                
                renderPages();
                
                setTimeout(() => {
                    loadingOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 300);
                }, 800);
                
            } catch (error) {
                console.error('Error:', error);
                bookData.pages = getFallbackData();
                totalPages = bookData.pages.length;
                totalPagesDisplay.textContent = totalPages;
                renderPages();
                
                setTimeout(() => {
                    loadingOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 300);
                }, 800);
            }
        }

        function getFallbackData() {
            return [
                "Kelurahan Padang Terubuk berdiri pada tahun 1950-an, berawal dari sebuah perkampungan kecil di tepian Sungai Siak. Nama 'Padang Terubuk' diambil dari bahasa setempat yang berarti 'padang rumput yang luas', menggambarkan kondisi geografis wilayah yang dulunya merupakan hamparan savana dengan ilalang tinggi.",
                
                "Pada masa kolonial Belanda, wilayah ini merupakan daerah perkebunan dan tempat persinggahan para pedagang yang melewati Sungai Siak. Banyak pedagang dari Minangkabau, Melayu, dan Tionghoa yang singgah dan akhirnya menetap, membentuk masyarakat yang heterogen.",
                
                "Tahun 1960-an, Padang Terubuk mulai berkembang pesat seiring dengan dibukanya akses jalan darat yang menghubungkan wilayah ini dengan pusat Kota Pekanbaru. Pemukiman mulai tertata, fasilitas umum seperti sekolah dan pasar mulai dibangun.",
                
                "Memasuki tahun 1980-an, Padang Terubuk resmi menjadi kelurahan definitif di Kecamatan Senapelan. Pembangunan infrastruktur semakin gencar dilakukan, termasuk perbaikan jalan, drainase, dan penerangan umum.",
                
                "Era reformasi membawa perubahan signifikan dengan diterapkannya otonomi daerah. Kelurahan Padang Terubuk mulai mengembangkan berbagai program pemberdayaan masyarakat dan peningkatan kualitas pelayanan publik.",
                
                "Memasuki era digital, Padang Terubuk bertransformasi menjadi kelurahan modern dengan sistem pelayanan berbasis teknologi. Masyarakat dapat mengakses berbagai layanan administrasi secara online, mempermudah urusan kependudukan dan perizinan.",
                
                "Hingga kini, Kelurahan Padang Terubuk terus berbenah, mengedepankan prinsip transparansi, akuntabilitas, dan partisipasi masyarakat dalam setiap program pembangunan, dengan tetap memegang teguh nilai-nilai kearifan lokal."
            ];
        }

        function renderPages() {
            if (!bookData.pages.length) return;
            
            const leftIndex = currentPage;
            const rightIndex = currentPage + 1;
            
            // Left Page
            if (leftIndex < bookData.pages.length) {
                const leftText = bookData.pages[leftIndex];
                leftContent.innerHTML = formatContent(leftText);
                leftBadge.textContent = leftIndex + 1;
                leftTitle.textContent = `Bab ${leftIndex + 1}`;
            } else {
                leftContent.innerHTML = '<div class="empty-state"><i class="fas fa-feather-alt"></i><p>Halaman kosong</p></div>';
                leftBadge.textContent = '';
                leftTitle.textContent = 'Selesai';
            }
            
            // Right Page
            if (rightIndex < bookData.pages.length) {
                const rightText = bookData.pages[rightIndex];
                rightContent.innerHTML = formatContent(rightText);
                rightBadge.textContent = rightIndex + 1;
                rightTitle.textContent = `Bab ${rightIndex + 1}`;
            } else {
                rightContent.innerHTML = '<div class="empty-state"><i class="fas fa-scroll"></i><p>Tamat</p></div>';
                rightBadge.textContent = '';
                rightTitle.textContent = 'Tamat';
            }
            
            // Update UI
            currentPageDisplay.textContent = leftIndex + 1;
            pageRange.textContent = `${leftIndex + 1}-${Math.min(rightIndex + 1, totalPages)}`;
            
            // Update buttons
            prevBtn.disabled = currentPage <= 0;
            nextBtn.disabled = currentPage + 2 >= totalPages;
            
            // Scroll to top
            leftContent.scrollTop = 0;
            rightContent.scrollTop = 0;
        }

        function formatContent(text) {
            const paragraphs = text.split('\n').filter(p => p.trim() !== '');
            
            if (paragraphs.length === 0) {
                return `<p>${text}</p>`;
            }
            
            return paragraphs.map(p => `<p>${p}</p>`).join('');
        }

        // Navigation
        prevBtn.addEventListener('click', () => {
            if (currentPage > 0) {
                currentPage -= 2;
                renderPages();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentPage + 2 < totalPages) {
                currentPage += 2;
                renderPages();
            }
        });

        // Touch Swipe
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });
        
        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            const diff = touchEndX - touchStartX;
            
            if (Math.abs(diff) > 50) {
                if (diff > 0) {
                    prevBtn.click();
                } else {
                    nextBtn.click();
                }
            }
        }, { passive: true });

        // Prevent double-tap zoom
        document.addEventListener('touchstart', (e) => {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });

        // Initialize
        fetchSejarahData();
    </script>
</body>
</html>
