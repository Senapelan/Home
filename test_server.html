<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Senapelan Satu Pintu</title>
    
    <!-- Meta Tags -->
    <meta name="application-name" content="Senapelan Satu Pintu">
    <meta name="description" content="Pelayanan terbaik lahir dari keikhlasan dan kebersamaan">
    <meta name="theme-color" content="#0066FF">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Senapelan Satu Pintu">
    <meta property="og:description" content="Pelayanan cepat, transparan, dan modern berbasis digital">
    <meta property="og:image" content="https://senapelan.github.io/Home/data/foto/thumbnail.png">
    
    <!-- Icons -->
    <link rel="icon" href="https://senapelan.github.io/Home/data/foto/icon-andro/iconandro.png">
    
    <style>
        /* ===== RESET & VARIABLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }

        :root {
            --primary: #0066FF;
            --secondary: #00D4AA;
            --dark: #0A0F2B;
            --gradient: linear-gradient(135deg, #0066FF, #00D4AA);
            --glass: rgba(255,255,255,0.1);
            --border: rgba(255,255,255,0.15);
        }

        body {
            color: white;
            background: var(--dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ===== BACKGROUND ===== */
        .video-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
        }
        .video-bg video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.5);
        }
        .overlay {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, rgba(10,15,43,0.9), rgba(0,70,204,0.4), rgba(0,212,170,0.2));
            z-index: -1;
        }

        /* ===== MARQUEE ===== */
        .marquee {
            background: linear-gradient(90deg, transparent, rgba(0,102,255,0.15), transparent);
            padding: 12px 0;
            overflow: hidden;
            white-space: nowrap;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
        }
        .marquee span {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 90s linear infinite;
            color: #B3E0FF;
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }

        /* ===== HEADER ===== */
        header {
            text-align: center;
            padding: 50px 20px 30px;
        }
        header h1 {
            font-size: 2.8rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 900;
            text-transform: uppercase;
            margin-bottom: 15px;
        }
        header p {
            font-size: 1.3rem;
            color: #E6F2FF;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ===== CONTAINER ===== */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 20px 60px;
            flex: 1;
        }

        /* ===== CARD UTAMA ===== */
        .card-utama {
            max-width: 900px;
            margin: 0 auto 60px;
            text-align: center;
        }
        .card-utama a {
            display: block;
            text-decoration: none;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px 30px;
            border: 1px solid var(--border);
            transition: 0.3s;
        }
        .card-utama a:hover {
            transform: translateY(-8px);
            box-shadow: 0 30px 60px rgba(0,102,255,0.25);
        }
        .card-utama img {
            max-width: 100%;
            max-height: 200px;
            object-fit: contain;
        }
        .card-utama h3 {
            font-size: 2rem;
            color: white;
            margin-top: 20px;
        }

        /* ===== GRID ===== */
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
            justify-items: center;
        }

        /* ===== CARD ===== */
        .card {
            width: 100%;
            max-width: 380px;
        }
        .card a {
            display: block;
            text-decoration: none;
            background: var(--glass);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 30px 20px;
            border: 1px solid var(--border);
            transition: 0.3s;
            height: 100%;
        }
        .card a:hover {
            transform: translateY(-8px);
            box-shadow: 0 30px 60px rgba(0,102,255,0.25);
        }
        .card img {
            width: 100%;
            max-height: 150px;
            object-fit: contain;
        }
        .card h3 {
            color: white;
            font-size: 1.4rem;
            margin: 15px 0 10px;
        }

        /* ===== COUNTER ===== */
        .visit-counter {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(5px);
            padding: 6px 16px;
            border-radius: 50px;
            border: 1px solid var(--border);
            margin-top: 5px;
        }
        .visit-counter span:first-child {
            font-size: 1.2rem;
            color: var(--secondary);
        }
        .visit-count {
            font-weight: 700;
            color: white;
            font-size: 1.2rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* ===== FOOTER 2 LOGO ===== */
        .footer {
            background: rgba(10,15,43,0.95);
            backdrop-filter: blur(20px);
            padding: 40px 20px;
            text-align: center;
            border-top: 1px solid rgba(0,102,255,0.2);
            margin-top: auto;
        }
        .footer-logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            margin-bottom: 25px;
        }
        .footer-logo-item {
            width: 70px;
            height: 70px;
        }
        .footer-logo-item img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        .copyright {
            color: #B3E0FF;
            margin-bottom: 20px;
        }
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        .footer-links a {
            color: #8CC8FF;
            text-decoration: none;
        }
        .footer-links a:hover {
            color: white;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 992px) {
            .grid { grid-template-columns: repeat(2, 1fr); }
            header h1 { font-size: 2.2rem; }
        }
        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr; }
            header h1 { font-size: 1.8rem; }
            .card-utama h3 { font-size: 1.6rem; }
            .footer-logo-item { width: 55px; height: 55px; }
        }
        @media (max-width: 480px) {
            header h1 { font-size: 1.5rem; }
            .footer-logo-container { gap: 25px; }
            .footer-logo-item { width: 45px; height: 45px; }
            .footer-links { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>
    <!-- BACKGROUND -->
    <div class="video-bg">
        <video autoplay muted loop>
            <source src="data/video/home.mp4" type="video/mp4">
        </video>
    </div>
    <div class="overlay"></div>

    <!-- MARQUEE -->
    <div class="marquee">
        <span>Selamat Datang di Kecamatan Senapelan Pelayanan Satu Pintu.</span>
    </div>

    <!-- HEADER -->
    <header>
        <h1>SENAPELAN SATU PINTU</h1>
        <p>"Pelayanan cepat, transparan, dan modern berbasis digital"</p>
    </header>

    <!-- MAIN CONTENT -->
    <div class="container">
        <!-- CARD UTAMA -->
        <div class="card-utama" data-id="kecamatan-senapelan" data-url="https://kec-senapelan.pekanbaru.go.id/">
            <a href="#" onclick="return false;" class="card-link">
                <img src="data/foto/kecamatansenapelan.png" alt="Kecamatan Senapelan">
                <h3>Website Kecamatan Senapelan</h3>
                <div class="visit-counter">
                    <span>üëÅÔ∏è</span>
                    <span class="visit-count" id="count-kecamatan-senapelan">0</span>
                    <span>kunjungan</span>
                </div>
            </a>
        </div>

        <!-- GRID 6 KELURAHAN -->
        <div class="grid">
            <!-- Kampung Bandar -->
            <div class="card" data-id="kampung-bandar" data-url="https://senapelan.github.io/Home/kelurahankampungbandar.html">
                <a href="#" onclick="return false;" class="card-link">
                    <img src="data/foto/kampungbandar.png" alt="Kampung Bandar">
                    <h3>Kel. Kampung Bandar</h3>
                    <div class="visit-counter">
                        <span>üëÅÔ∏è</span>
                        <span class="visit-count" id="count-kampung-bandar">0</span>
                        <span>kunjungan</span>
                    </div>
                </a>
            </div>
            <!-- Kampung Baru -->
            <div class="card" data-id="kampung-baru" data-url="https://senapelan.github.io/Home/kelurahankampungbaru.html">
                <a href="#" onclick="return false;" class="card-link">
                    <img src="data/foto/kampungbaru.png" alt="Kampung Baru">
                    <h3>Kel. Kampung Baru</h3>
                    <div class="visit-counter">
                        <span>üëÅÔ∏è</span>
                        <span class="visit-count" id="count-kampung-baru">0</span>
                        <span>kunjungan</span>
                    </div>
                </a>
            </div>
            <!-- Kampung Dalam -->
            <div class="card" data-id="kampung-dalam" data-url="https://senapelan.github.io/Home/kelurahankampungdalam.html">
                <a href="#" onclick="return false;" class="card-link">
                    <img src="data/foto/kampungdalam.png" alt="Kampung Dalam">
                    <h3>Kel. Kampung Dalam</h3>
                    <div class="visit-counter">
                        <span>üëÅÔ∏è</span>
                        <span class="visit-count" id="count-kampung-dalam">0</span>
                        <span>kunjungan</span>
                    </div>
                </a>
            </div>
            <!-- Padang Bulan -->
            <div class="card" data-id="padang-bulan" data-url="https://senapelan.github.io/Home/kelurahanpadangbulan.html">
                <a href="#" onclick="return false;" class="card-link">
                    <img src="data/foto/padangbulan.png" alt="Padang Bulan">
                    <h3>Kel. Padang Bulan</h3>
                    <div class="visit-counter">
                        <span>üëÅÔ∏è</span>
                        <span class="visit-count" id="count-padang-bulan">0</span>
                        <span>kunjungan</span>
                    </div>
                </a>
            </div>
            <!-- Padang Terubuk -->
            <div class="card" data-id="padang-terubuk" data-url="https://senapelan.github.io/Home/kelurahanpadangterubuk.html">
                <a href="#" onclick="return false;" class="card-link">
                    <img src="data/foto/padangterubuk.png" alt="Padang Terubuk">
                    <h3>Kel. Padang Terubuk</h3>
                    <div class="visit-counter">
                        <span>üëÅÔ∏è</span>
                        <span class="visit-count" id="count-padang-terubuk">0</span>
                        <span>kunjungan</span>
                    </div>
                </a>
            </div>
            <!-- Sago -->
            <div class="card" data-id="sago" data-url="https://senapelan.github.io/Home/kelurahansago.html">
                <a href="#" onclick="return false;" class="card-link">
                    <img src="data/foto/sago.png" alt="Sago">
                    <h3>Kel. Sago</h3>
                    <div class="visit-counter">
                        <span>üëÅÔ∏è</span>
                        <span class="visit-count" id="count-sago">0</span>
                        <span>kunjungan</span>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <!-- FOOTER 2 LOGO -->
    <footer class="footer">
        <div class="footer-logo-container">
            <div class="footer-logo-item">
                <img src="https://senapelan.github.io/Home/data/foto/LOGOPEMKOT.png" alt="Pemkot Pekanbaru">
            </div>
            <div class="footer-logo-item">
                <img src="https://senapelan.github.io/Home/data/foto/icon-andro/iconandro.png" alt="Senapelan">
            </div>
        </div>
        <div class="copyright">
            ¬© 2026 Senapelan Satu Pintu ‚Ä¢ Kecamatan Senapelan, Kota Pekanbaru
        </div>
        <div class="footer-links">
            <a href="https://kec-senapelan.pekanbaru.go.id/">Website Resmi</a>
            <a href="mailto:senapelan@pekanbaru.go.id">Kontak Email</a>
            <a href="tel:+62712345678">Telepon</a>
            <a href="https://maps.app.goo.gl/">Lokasi</a>
        </div>
    </footer>

    <script>
        // ============================================
        // KONFIGURASI - GANTI DENGAN URL BARU ANDA!
        // ============================================
        const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz0gYC31gMllQUXIbIxuB1emBqPNITafTNped4zeih8UgfhpJSemg-ofUXDLXPG6h-nuw/exec';
        
        // Data counter
        let visitCounters = {
            'kecamatan-senapelan': 0,
            'kampung-bandar': 0,
            'kampung-baru': 0,
            'kampung-dalam': 0,
            'padang-bulan': 0,
            'padang-terubuk': 0,
            'sago': 0
        };

        // ============================================
        // 1. LOAD DATA - TANPA LOADING, TANPA NOTIF
        // ============================================
        async function loadCounters() {
            try {
                const response = await fetch(`${APPS_SCRIPT_URL}?t=${Date.now()}`, {
                    method: 'GET',
                    mode: 'no-cors', // UBAH KE no-cors!
                    cache: 'no-cache'
                });
                
                // Karena mode no-cors, kita tidak bisa baca response
                // Tapi ini akan mengirim request dengan benar
                console.log('Request sent to:', APPS_SCRIPT_URL);
                
            } catch (error) {
                console.log('Load error (ignored):', error);
            }
            
            // TETAP TAMPILKAN ANGKA dari localStorage
            loadFromLocalStorage();
        }

        // ============================================
        // 2. UPDATE COUNTER - PAKAI JSONP ALTERNATIF
        // ============================================
        function updateCounter(id, url) {
            // Update local counter dulu
            visitCounters[id] = (visitCounters[id] || 0) + 1;
            
            // Update tampilan
            const el = document.getElementById(`count-${id}`);
            if (el) {
                el.textContent = visitCounters[id].toLocaleString();
            }
            
            // Simpan ke localStorage
            saveToLocalStorage();
            
            // Kirim ke spreadsheet (background, tanpa notif)
            sendToSpreadsheet(id, url);
            
            // Buka URL
            setTimeout(() => {
                window.open(url, '_blank');
            }, 100);
        }

        // ============================================
        // 3. KIRIM KE SPREADSHEET - PAKAI JSONP
        // ============================================
        function sendToSpreadsheet(id, url) {
            // Buat data
            const data = JSON.stringify({
                id: id,
                url: url,
                userAgent: navigator.userAgent,
                timestamp: new Date().toISOString()
            });
            
            // Method 1: Pakai fetch mode no-cors
            fetch(APPS_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // Penting: no-cors untuk Apps Script!
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    id: id,
                    url: url,
                    userAgent: navigator.userAgent
                })
            }).catch(e => console.log('Send ok (no response needed)'));
            
            // Method 2: Pakai Image beacon (fallback)
            try {
                const img = new Image();
                img.src = `${APPS_SCRIPT_URL}?id=${id}&url=${encodeURIComponent(url)}&ua=${encodeURIComponent(navigator.userAgent)}&cb=${Date.now()}`;
            } catch(e) {}
        }

        // ============================================
        // 4. LOCALSTORAGE
        // ============================================
        function saveToLocalStorage() {
            localStorage.setItem('senapelan_counter', JSON.stringify(visitCounters));
        }

        function loadFromLocalStorage() {
            const saved = localStorage.getItem('senapelan_counter');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    visitCounters = { ...visitCounters, ...data };
                    
                    // Update tampilan
                    Object.keys(visitCounters).forEach(key => {
                        const el = document.getElementById(`count-${key}`);
                        if (el) {
                            el.textContent = visitCounters[key]?.toLocaleString() || '0';
                        }
                    });
                    
                } catch (e) {}
            }
        }

        // ============================================
        // 5. HANDLE CLICK
        // ============================================
        function handleCardClick(e, id, url) {
            e.preventDefault();
            updateCounter(id, url);
        }

        // ============================================
        // 6. INIT - TANPA NOTIF, TANPA LOADING
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            // Load dari localStorage dulu (langsung tampil angka)
            loadFromLocalStorage();
            
            // Load dari spreadsheet di background
            loadCounters();
            
            // Attach event listeners
            document.querySelectorAll('.card, .card-utama').forEach(card => {
                const link = card.querySelector('.card-link');
                const id = card.dataset.id;
                const url = card.dataset.url;
                
                if (link && id && url) {
                    link.addEventListener('click', function(e) {
                        handleCardClick(e, id, url);
                    });
                }
            });
            
            // Ambil data dari spreadsheet setiap 60 detik
            setInterval(loadCounters, 60000);
        });
    </script>
</body>
</html>
